<mxfile host="app.diagrams.net" modified="2023-07-09T05:17:26.268Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36" etag="aYRddGAIuaayZKoHL1br" version="21.5.2" type="github" pages="3">
  <diagram name="class diagram" id="ikR7i4KXqVAYdrTPTn3q">
    <mxGraphModel dx="2021" dy="656" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="8rfrDcUoEPC_cq-M47oy-1" value="AsyncTaskServiceImpl" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="180" y="330" width="140" height="52" as="geometry" />
        </mxCell>
        <mxCell id="8rfrDcUoEPC_cq-M47oy-5" value="FundWmsAsyncTask" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="470" y="332" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="g2iz1l07HuA3bQ5gWP3K-1" value="+ asyncTaskService:&amp;nbsp;AsyncTaskServiceImpl" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="8rfrDcUoEPC_cq-M47oy-5">
          <mxGeometry y="26" width="260" height="34" as="geometry" />
        </mxCell>
        <mxCell id="8rfrDcUoEPC_cq-M47oy-9" value="«interface»&lt;br&gt;&lt;b&gt;InitializingBean&lt;/b&gt;" style="html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="340" y="140" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8rfrDcUoEPC_cq-M47oy-10" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="8rfrDcUoEPC_cq-M47oy-1" target="8rfrDcUoEPC_cq-M47oy-9">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="110" y="340" as="sourcePoint" />
            <mxPoint x="270" y="340" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8rfrDcUoEPC_cq-M47oy-11" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.591;entryY=1.04;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="8rfrDcUoEPC_cq-M47oy-5" target="8rfrDcUoEPC_cq-M47oy-9">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="110" y="340" as="sourcePoint" />
            <mxPoint x="270" y="340" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8rfrDcUoEPC_cq-M47oy-12" value="AsyncTaskWork" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-80" y="540" width="280" height="78" as="geometry" />
        </mxCell>
        <mxCell id="8rfrDcUoEPC_cq-M47oy-13" value="+&amp;nbsp;taskId&lt;span style=&quot;background-color: initial;&quot;&gt;: long&lt;/span&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="8rfrDcUoEPC_cq-M47oy-12">
          <mxGeometry y="26" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="8rfrDcUoEPC_cq-M47oy-14" value="+ asyncTaskService:&amp;nbsp;AsyncTaskServiceImpl" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="8rfrDcUoEPC_cq-M47oy-12">
          <mxGeometry y="52" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="8rfrDcUoEPC_cq-M47oy-16" value="«interface»&lt;br&gt;&lt;b&gt;Runnable&lt;/b&gt;" style="html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="10" y="332" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8rfrDcUoEPC_cq-M47oy-17" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="8rfrDcUoEPC_cq-M47oy-12" target="8rfrDcUoEPC_cq-M47oy-16">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="530" y="340" as="sourcePoint" />
            <mxPoint x="415" y="202" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8rfrDcUoEPC_cq-M47oy-18" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="8rfrDcUoEPC_cq-M47oy-12">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="460" y="500" as="sourcePoint" />
            <mxPoint x="260" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="g2iz1l07HuA3bQ5gWP3K-2" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;exitX=0;exitY=0.367;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitPerimeter=0;" edge="1" parent="1" source="8rfrDcUoEPC_cq-M47oy-5" target="8rfrDcUoEPC_cq-M47oy-1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="140" y="550" as="sourcePoint" />
            <mxPoint x="270" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Af_HxoB_dP8bMgjfUH3v" name="structure">
    <mxGraphModel dx="1194" dy="656" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="BwtJvhmBE2LO-VKlyNQl-1" value="" style="swimlane;startSize=0;" vertex="1" parent="1">
          <mxGeometry x="250" y="350" width="200" height="200" as="geometry">
            <mxRectangle x="250" y="350" width="50" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="BwtJvhmBE2LO-VKlyNQl-2" value="service1" style="whiteSpace=wrap;html=1;" vertex="1" parent="BwtJvhmBE2LO-VKlyNQl-1">
          <mxGeometry x="24" y="130" width="160" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="slAzV9YY-AGd1bLpiqN-" name="flow">
    <mxGraphModel dx="2021" dy="656" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="b7P9VEdMYVW15TvzK9gh-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.639;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="JW_-LaMGTlPM_i0lU95A-1" target="JW_-LaMGTlPM_i0lU95A-2">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="230" y="160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.46;entryY=-0.004;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="JW_-LaMGTlPM_i0lU95A-1" target="JW_-LaMGTlPM_i0lU95A-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JW_-LaMGTlPM_i0lU95A-1" value="start" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="420" y="130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JW_-LaMGTlPM_i0lU95A-2" value="" style="whiteSpace=wrap;html=1;container=1;" vertex="1" parent="1">
          <mxGeometry x="-160" y="290" width="610" height="790" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-5" value="FundWmsAsyncTask init" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="JW_-LaMGTlPM_i0lU95A-2">
          <mxGeometry x="160.5263157894737" y="20.40740740740741" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-4" value="" style="whiteSpace=wrap;html=1;container=1;" vertex="1" parent="JW_-LaMGTlPM_i0lU95A-2">
          <mxGeometry x="27.59523809523809" y="73.89" width="529.7414285714285" height="676.11" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="b7P9VEdMYVW15TvzK9gh-4" source="b7P9VEdMYVW15TvzK9gh-6" target="b7P9VEdMYVW15TvzK9gh-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-6" value="loop" style="whiteSpace=wrap;html=1;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-4">
          <mxGeometry x="188.81115852401564" y="28.956493478226356" width="116.19148216862503" height="37.87509346952008" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="b7P9VEdMYVW15TvzK9gh-4" source="b7P9VEdMYVW15TvzK9gh-7" target="b7P9VEdMYVW15TvzK9gh-9">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="169.92857142857142" y="130.25230256410256" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-13" value="isMaster" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="b7P9VEdMYVW15TvzK9gh-11">
          <mxGeometry x="0.1682" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-12" value="isFollower" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="b7P9VEdMYVW15TvzK9gh-4" source="b7P9VEdMYVW15TvzK9gh-7" target="b7P9VEdMYVW15TvzK9gh-10">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="408.11904761904754" y="130.25230256410256" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-7" value="check zkLock" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-4">
          <mxGeometry x="188.81115852401564" y="101.34772717379226" width="116.19148216862503" height="57.91298695645271" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="b7P9VEdMYVW15TvzK9gh-4" source="b7P9VEdMYVW15TvzK9gh-9" target="b7P9VEdMYVW15TvzK9gh-6">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="117.64387569573283" y="47.77821423907349" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-9" value="" style="whiteSpace=wrap;html=1;container=1;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-4">
          <mxGeometry x="17.965952380952377" y="283.15" width="304.99999999999994" height="366.85" as="geometry">
            <mxRectangle x="12.368528138528134" y="250.0016288173847" width="210" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-29" value="asyncTaskService.processTask" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-9">
          <mxGeometry x="1.0319787352706217e-14" y="11.487261689210767" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="b7P9VEdMYVW15TvzK9gh-9" source="b7P9VEdMYVW15TvzK9gh-30" target="b7P9VEdMYVW15TvzK9gh-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-30" value="查询前100个待执行的任务，遍历每个任务" style="whiteSpace=wrap;html=1;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-9">
          <mxGeometry x="50.83" y="41.489999999999995" width="129.17" height="49.9" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-36" value="存在" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="b7P9VEdMYVW15TvzK9gh-9" source="b7P9VEdMYVW15TvzK9gh-32" target="b7P9VEdMYVW15TvzK9gh-31">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="44" y="166" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="b7P9VEdMYVW15TvzK9gh-9" source="b7P9VEdMYVW15TvzK9gh-32" target="b7P9VEdMYVW15TvzK9gh-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-38" value="不存在" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="b7P9VEdMYVW15TvzK9gh-37">
          <mxGeometry x="0.1975" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-32" value="是否存在该任务的redis锁" style="rhombus;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=12;fontColor=default;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-9">
          <mxGeometry x="69.91" y="122.96" width="91.01" height="87.04" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-31" value="构建AsyncTaskWork提交到线程池" style="whiteSpace=wrap;html=1;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-9">
          <mxGeometry x="14.439999999999998" y="282.96" width="116.96" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-34" value="在执行中，跳过" style="whiteSpace=wrap;html=1;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-9">
          <mxGeometry x="180.00404761904764" y="282.96000000000004" width="92.64" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="b7P9VEdMYVW15TvzK9gh-4" source="b7P9VEdMYVW15TvzK9gh-10" target="b7P9VEdMYVW15TvzK9gh-6">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="466.2183222016079" y="47.77821423907349" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-10" value="sleep 1s" style="whiteSpace=wrap;html=1;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-4">
          <mxGeometry x="350.02448855905993" y="283.1590243325257" width="174.2872232529375" height="43.43474021733953" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-17" value="startTread" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-4">
          <mxGeometry x="17.965952380952384" y="11.32628717948718" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="JW_-LaMGTlPM_i0lU95A-3" value="" style="whiteSpace=wrap;html=1;container=1;" vertex="1" parent="1">
          <mxGeometry x="550" y="290" width="430" height="570" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-19" value="" style="whiteSpace=wrap;html=1;container=1;" vertex="1" parent="JW_-LaMGTlPM_i0lU95A-3">
          <mxGeometry x="28.666666666666668" y="70" width="315.3333333333333" height="36.47" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-18" value="init executorPool" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-19">
          <mxGeometry x="14.333333333333334" y="2.279375" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-20" value="" style="whiteSpace=wrap;html=1;container=1;" vertex="1" parent="JW_-LaMGTlPM_i0lU95A-3">
          <mxGeometry x="28.67000000000004" y="140" width="310" height="350" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="b7P9VEdMYVW15TvzK9gh-20" source="b7P9VEdMYVW15TvzK9gh-21" target="b7P9VEdMYVW15TvzK9gh-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-21" value="sleep 3s" style="whiteSpace=wrap;html=1;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-20">
          <mxGeometry x="80" y="145" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="b7P9VEdMYVW15TvzK9gh-20" source="b7P9VEdMYVW15TvzK9gh-22" target="b7P9VEdMYVW15TvzK9gh-23">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="230" y="280" />
              <mxPoint x="230" y="75" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-22" value="查询任务表中状态为待执行的任务数量和第一个待执行任务的序号，记录下来" style="whiteSpace=wrap;html=1;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-20">
          <mxGeometry x="80" y="250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="b7P9VEdMYVW15TvzK9gh-20" source="b7P9VEdMYVW15TvzK9gh-23" target="b7P9VEdMYVW15TvzK9gh-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-23" value="loop" style="whiteSpace=wrap;html=1;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-20">
          <mxGeometry x="80" y="45" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-27" value="startThread to updateQueueSize" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="b7P9VEdMYVW15TvzK9gh-20">
          <mxGeometry x="20" y="10" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-28" value="AsyncTaskServiceImpl init" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="JW_-LaMGTlPM_i0lU95A-3">
          <mxGeometry x="80" y="20" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-44" value="" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="170" y="1210" width="640" height="1030" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-45" target="b7P9VEdMYVW15TvzK9gh-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-45" value="构造该任务的redis锁" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="1280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.342;entryY=-0.033;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-46" target="b7P9VEdMYVW15TvzK9gh-47">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="271" y="1440" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-56" value="失败" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="b7P9VEdMYVW15TvzK9gh-55">
          <mxGeometry x="0.0298" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-46" target="b7P9VEdMYVW15TvzK9gh-49">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-58" value="成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="b7P9VEdMYVW15TvzK9gh-57">
          <mxGeometry x="-0.4839" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-46" value="加锁" style="rhombus;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=12;fontColor=default;" vertex="1" parent="1">
          <mxGeometry x="330" y="1390" width="100" height="100" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-47" target="b7P9VEdMYVW15TvzK9gh-59">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="280" y="1690" />
              <mxPoint x="280" y="1690" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-47" value="任务执行中" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="230" y="1550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-48" value="end" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="2060" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.9;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-49" target="b7P9VEdMYVW15TvzK9gh-59">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="360" y="1580" />
              <mxPoint x="360" y="1920" />
              <mxPoint x="358" y="1920" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-62" value="不是待执行" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="b7P9VEdMYVW15TvzK9gh-61">
          <mxGeometry x="-0.0314" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-49" target="b7P9VEdMYVW15TvzK9gh-50">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-64" value="待执行" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="b7P9VEdMYVW15TvzK9gh-63">
          <mxGeometry x="-0.15" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-49" value="检查任务状态" style="rhombus;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=12;fontColor=default;" vertex="1" parent="1">
          <mxGeometry x="450" y="1525" width="100" height="110" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-50" target="b7P9VEdMYVW15TvzK9gh-51">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-50" value="执行任务" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="630" y="1550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.417;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-51" target="b7P9VEdMYVW15TvzK9gh-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-69" value="异常" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="b7P9VEdMYVW15TvzK9gh-66">
          <mxGeometry x="-0.3795" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.417;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-51" target="b7P9VEdMYVW15TvzK9gh-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-68" value="成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="b7P9VEdMYVW15TvzK9gh-67">
          <mxGeometry x="0.44" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-51" value="执行成功？" style="rhombus;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=12;fontColor=default;" vertex="1" parent="1">
          <mxGeometry x="640" y="1660" width="100" height="90" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-52" target="b7P9VEdMYVW15TvzK9gh-59">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-52" value="修改任务状态" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="460" y="1850" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-71" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.008;entryY=0.633;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-53" target="b7P9VEdMYVW15TvzK9gh-59">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="705" y="1988" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-53" value="捕获异常，日志告警，不修改任务状态，下次就能查询到该任务状态为待执行，就会重新执行" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="610" y="1850" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-72" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="b7P9VEdMYVW15TvzK9gh-59" target="b7P9VEdMYVW15TvzK9gh-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-59" value="lua脚本检查是否加锁，是否由当前线程持有锁，有则解锁" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="1950" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="b7P9VEdMYVW15TvzK9gh-73" value="AsyncTaskWorker的run方法" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="190" y="1220" width="170" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
